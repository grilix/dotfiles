set enc=utf-8
filetype off
set rtp+=~/.vim/bundle/Vundle.vim/
call vundle#rc()

Plugin 'gmarik/Vundle.vim'
Plugin 'tpope/vim-dispatch'

Plugin 'mhinz/vim-startify'
Plugin 'ervandew/supertab'
Plugin 'nathanaelkane/vim-indent-guides'
"Plugin 'sjl/gundo.vim.git'
Plugin 'airblade/vim-gitgutter'
Plugin 'scrooloose/nerdtree'
Plugin 'Xuyuanp/nerdtree-git-plugin'
Plugin 'scrooloose/nerdcommenter'
Plugin 'ctrlpvim/ctrlp.vim'
Plugin 'tpope/vim-fugitive'
Plugin 'scrooloose/syntastic'

" Colors
Plugin 'chumakd/ScrollColors'
Plugin 'flazz/vim-colorschemes'

" Clojure treats
Plugin 'fireplace.vim'
Plugin 'junegunn/rainbow_parentheses.vim'

Plugin 'bling/vim-airline'
Plugin 'szw/vim-tags'
Plugin 'skwp/vim-rspec'
"Plugin 'majutsushi/tagbar'

" File syntax
Plugin 'jelera/vim-javascript-syntax'
Plugin 'elzr/vim-json'
Plugin 'ekalinin/dockerfile.vim'
Plugin 'nanotech/jellybeans.vim'
Plugin 'arcticicestudio/nord-vim'

let g:indent_guides_auto_colors = 0
let g:indent_guides_start_level = 2

hi IndentGuidesOdd  ctermbg=None
hi IndentGuidesEven ctermbg=black

augroup rainbow_lisp
  autocmd!
  autocmd FileType lisp,clojure,scheme RainbowParentheses
augroup END

"filetype plugin indent on " required!?
autocmd BufRead,BufNewFile * set indentkeys=0{,0},0),0],!^F,o,O,e

" lets ignore some shit directories
set wildignore+=*/vendor/*,*/tmp/*,*/data/*,*/log/*

let g:ctrlp_working_path_mode = 'rac'
let g:ctrlp_cache_dir='~/.vim/ctrlp_cache'
let g:ctrlp_max_files=4000
let g:ctrlp_dotfiles = 0

let g:airline#extensions#branch#enabled = 0
let g:airline#extensions#tagbar#enabled = 0
let g:airline#extensions#csv#enabled = 0
let g:airline#extensions#wordcount#enabled = 0

set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*

let g:syntastic_always_populate_loc_list = 1
let g:syntastic_loc_list_height = 5
let g:syntastic_auto_loc_list = 0
let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 1
let g:syntastic_javascript_checkers = ['eslint']

let g:ctrlp_custom_ignore = {
  \ 'dir':  '\v[\/](\.(git|hg|svn)|vendor|tmp|public|data)$',
  \ }

let NERDTreeQuitOnOpen=1
let NERDTreeChDirMode=2
"let g:nerdtree_tabs_autofind=1

set nocompatible

" visual shifting (does not exit Visual mode)
vnoremap < <gv
vnoremap > >gv
noremap Q <Nop>

noremap ]q :cnext<CR>
noremap [q :cprev<CR>

nnoremap <Leader>a :NERDTreeToggle<RETURN>
nnoremap <Leader>t :TagbarOpenAutoClose<CR>
nnoremap <Leader>u :GundoToggle<CR>

noremap . .`[

inoremap <Cr> <Esc>
nnoremap <Cr> i<Cr><Esc>
"inoremap <Esc> a<Bs><Esc>u
" This seems to work way better than previous approach,
" but it requires +backspace+ to not have 'start', which
" is also great.
inoremap <Esc>  <Esc>

highlight link SyntasticErrorSign SignColumn
highlight link SyntasticWarningSign SignColumn
highlight link SyntasticStyleErrorSign SignColumn
highlight link SyntasticStyleWarningSign SignColumn

"improve autocomplete menu color
highlight Pmenu ctermbg=238 gui=bold

set colorcolumn=80

set showfulltag
set timeout timeoutlen=1000 ttimeoutlen=100

set cpoptions=Adq$-
syntax on

set encoding=utf-8
" Allow backspace to go over autoindents, but not more.
set backspace=indent
set nowritebackup
set noswapfile
set clipboard+=unnamed
set fileformats=unix,dos,mac
set nohidden
set iskeyword+=_,$,@,%,#
set mouse=n

set hlsearch
set incsearch
set laststatus=2
set lazyredraw
set linespace=0
set list
set listchars=tab:>-,trail:~,extends:»,precedes:«
set matchtime=1
set novisualbell
set number
set numberwidth=4
set report=0
set scrolloff=3
set showmatch

set formatoptions=ocql
set ignorecase
set infercase
set nowrap
set expandtab
set shiftround
set shiftwidth=2
set softtabstop=2
set tabstop=8
set smartcase

" reload vim configuration on write
autocmd! bufwritepost .vimrc source %
